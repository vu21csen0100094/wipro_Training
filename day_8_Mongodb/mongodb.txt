Smart Energy Monitoring – Time Series & Aggregations
Objective
To design and analyze a time-series database in MongoDB that captures real-time energy consumption readings from smart meters across multiple locations.
This exercise emphasizes time-based data modeling, aggregations, filtering by time, and performance optimization using indexes.
Scenario Background
You are developing a dashboard for a smart energy company — GreenPulse Energy — that monitors electricity usage from IoT meters installed in various buildings.
Each smart meter records readings every minute, including timestamp, energy consumed (kWh), and temperature.



1) create a db in mongodb shell
2) select timeseries, metadat and granularity
3) insert data 


1)Retrieving all readings  for a specific meter ex mtr001:
db.energy_readings.find({"meterId":"MTR001"});

2)Find the readings between two time stamps:
db.energy_readings.find({
  timestamp: {
    $gte: ISODate("2025-10-29T00:00:00Z"),
    $lte: ISODate("2025-10-29T23:59:59Z")
  }
});


3)Finding total energy consumption per meter:
db.energy_readings.aggregate([
  {
    $group: {
      _id: "$meterId",
      totalEnergy: { $sum: "$energy_kWh" }
    }
  }
]);


4)Average temperature by location ?:
db.energy_readings.aggregate([
  {
    $group: {
      _id: "$location",
      avgTemperature: { $avg: "$temperature_C" }
    }
  }
]);


5)Hourly energy consumption trend:
db.energy_readings.aggregate([
  {
    $group: {
      _id: {
        meterId: "$meterId",
        hour: { $hour: "$timestamp" }
      },
      totalEnergy: { $sum: "$energy_kWh" }
    }
  },
  {
    $sort: {
      "_id.meterId": 1,  // sorts by meterId alphabetically/numerically
      "_id.hour": 1      // sorts by hour in ascending order
    }
  }
]);


6)Comparing average energy usage across meters

7)Detecting high usage Hours (>6hrs)
db.energy_readings.aggregate([
  {
    $group: {
      _id: {
        meter_id: "$meterId",
        hours: { $hour: "$timestamp" }
      },
      totalEnergy: { $sum: "$energy_kWh" }
    }
  },
  {
    $match: {
      totalEnergy: { $gt: 6 }
    }
  },
  {
    $sort: {
      "_id.meter_id": 1
    }
  }
]);

8)Indexing and query optimization for:

a.Creating an Index on timestamp:
db.energy_readings.createIndex({ timestamp: 1 });

b.Compound index on Meter + timestamp:
db.energy_readings.createIndex({ meterId: 1, timestamp: 1 });




README.md should include:
Demo overview
Steps to create time-series collection
Sample aggregation outputs
Best practices summary
/MongoDB_TimeSeries_Demo/
│-- data/
│   ├── energy_readings.json
│-- queries/
│   ├── basic_queries.js
│   ├── aggregations.js
│   ├── index_optimization.js
│-- screenshots/
│   ├── aggregation_results.png
│   ├── compass_index_view.png
│-- README.md